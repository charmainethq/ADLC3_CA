- name: Slack Notification
  uses: rtCamp/action-slack-notify@v2
  env:
    SLACK_CHANNEL: general
    SLACK_TITLE: DIPSA 56 CI/CD Submission
    SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
  with:
    status: ${{ job.status }}
    text: |
      {
        "blocks": [
          {
            "type": "header",
            "text": {
              "type": "plain_text",
              "text": "Application Provisioned",
              "emoji": true
            }
          },
          {
            "type": "divider"
          },
          {
            "type": "section",
            "fields": [
              {
                "type": "mrkdwn",
                "text": "*Name:* Charmaine Tan"
              },
              {
                "type": "mrkdwn",
                "text": "*Matriculation Number:* E1112932"
              },
              {
                "type": "mrkdwn",
                "text": "*Email:* e1112932@u.nus.edu"
              },
              {
                "type": "mrkdwn",
                "text": "*Repository:* ${{ github.repository }}"
              },
              {
                "type": "mrkdwn",
                "text": "*Deployment URL:* ${{ secrets.RAILWAY_URL }}"
              }
            ]
          },
          {
            "type": "actions",
            "elements": [
              {
                "type": "button",
                "text": {
                  "type": "plain_text",
                  "text": "Go",
                  "emoji": true
                },
                "url": "https://my-app.railway.app"
              },
              {
                "type": "button",
                "text": {
                  "type": "plain_text",
                  "text": "View on GitHub",
                  "emoji": true
                },
                "url": "${{ secrets.RAILWAY_URL }}"
              }
            ]
          }
        ]
      }
